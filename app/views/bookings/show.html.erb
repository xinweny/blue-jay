<div class="container">
  <div class="booking-header d-flex justify-content-between align-items-center">
    <h2>Booking for <%= link_to @booking.band.name, band_path(@booking.band) %></h2>
    <%= link_to 'Back to bookings', bookings_path %>
  </div>

  <% if @booking.latitude && @booking.longitude %>
    <div class="booking-map"
      id="map"
      style="width: 100%;
      height: 500px;"
      data-markers="<%= @markers.to_json %>"
      data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
    ></div>
  <% end %>

  <div class="booking-content">
    <p><strong>Booking id:</strong> <%= @booking.id %></p>
    <p><strong>By:</strong> <%= @booking.user.full_name %></p>
    <p><strong>Start:</strong> <%= @booking.time_start %></p>
    <p><strong>End:</strong> <%= @booking.time_end %></p>
    <p><strong>Venue:</strong> <%= @booking.address %></p>
    <p><strong>Total price:</strong> $<%= @booking.total_price %></p>
    <p><strong>Status:</strong> <%= @booking.status.capitalize %></p>
  </div>
  <div class="px-auto">
    <% if @booking.status == Booking.statuses.keys[0] || true %>
      <% if policy(@booking).edit? || true %>
        <div class="booking-buttons d-flex justify-content-between align-items-center">
          <%= simple_form_for [@band, @booking] do |f| %>
            <%= f.input :status, as: :hidden, input_html: { value: Booking.statuses.keys[1] } %>
            <%= f.submit 'Accept', class: "btn btn-success" %>
          <% end %>
          <%= simple_form_for [@band, @booking] do |f| %>
            <%= f.input :status, as: :hidden, input_html: { value: Booking.statuses.keys[2] } %>
            <%= f.submit 'Reject', class: "btn btn-danger" %>
          <% end %>
        </div>
      <% end %>
    <% end %>
  </div>
</div>
